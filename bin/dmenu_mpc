#!/bin/bash
# set -e

# Get the current playlist
format="%artist% - %title%"
playlist="$(mpc playlist -f "$format")"

# Pipe the playlist to dmenu, catch name
name="$(echo "$playlist" | dmenu -fn 'WenQuanYi Micro Hei' -l 5 "$@")"

# Get the playlist position of the name with sed
songnum="$(echo "$playlist" | sed -n "/${name}/=")"

# Play the song
mpc play $songnum
